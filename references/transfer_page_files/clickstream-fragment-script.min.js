/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./clickstream-fragment-script.js":
/*!****************************************!*\
  !*** ./clickstream-fragment-script.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nclass ClickstreamEventRecorder {\r\n    constructor() {\r\n        this.events = [];\r\n        this.timeout = null;\r\n        this.intervalTime = 1000 * 60 * 5;\r\n    }\r\n\tdelay(milliseconds) {\r\n\t\tvar promise = new Promise(function(resolve, reject) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tresolve();\r\n\t\t\t}, milliseconds);\r\n\t\t});\r\n\t\treturn promise;\r\n\t}\r\n    publishEventsOnTimer() {\r\n\t\tvar self = this;\r\n        if (!self.timeout) {\r\n            self.timeout = setTimeout(async function() {\r\n                clearTimeout(self.timeout);\r\n                self.timeout = null;\r\n                let payloadEvents = self.events;\r\n                self.events = [];\r\n\t\t\t\t\r\n                try {\r\n                    await self.publishEventsAsync(payloadEvents);\r\n                    self.recordMetrics(window, 'timer', payloadEvents, null);\r\n                }\r\n                catch (e) {\r\n                    self.recordMetrics(window, 'timer', null, payloadEvents);\r\n                }\r\n                finally {\r\n                    self.publishEventsOnTimer();\r\n                }\r\n            }, self.intervalTime);\r\n        }\r\n        else {\r\n            clearTimeout(self.timeout);\r\n            self.publishEventsOnTimer();\r\n        }\r\n    }\r\n    async publishEventsAsync(events, retryCounter) {\t\r\n\t\tretryCounter = retryCounter || 1;\r\n\t\tvar self = this;\r\n        if (retryCounter > 3) {\r\n            throw new Error('The retry count was hit for this publish attempt. Dropping the events.');\r\n        }\r\n\t\t\r\n        if (events.length) {\r\n            let recordEvents = new Promise(function (resolve, reject) {\r\n                try {\r\n                    var xhr = new XMLHttpRequest();\r\n                    xhr.open('POST', '/api/clickstream/events', true);\r\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n                    xhr.onreadystatechange = function() {\r\n                        if (xhr.readyState === 4) {\r\n\t\t\t\t\t\t\tif(xhr.status === 200) {\r\n\t\t\t\t\t\t\t\tresolve(xhr.responseText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\treject(xhr.status);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n                    };\r\n                    xhr.send(`events=${JSON.stringify(events)}`);\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            });\r\n\t\t\t\t\t\t\r\n\t\t\ttry {\r\n                await recordEvents;\r\n            }\r\n            catch (e) {\r\n                await self.delay(retryCounter * 200);\r\n                await self.publishEventsAsync(events, retryCounter + 1);\r\n            }\r\n        }\r\n    }\r\n    recordClickEvent(eventId, eventName) {\r\n        let newEvent = {\r\n            d: new Date().getTime(),\r\n            et: 'Click',\r\n            o: window.location.pathname,\r\n            id: eventId,\r\n            en: eventName // Event name\r\n        };\r\n        this.events.push(newEvent);\r\n    }\r\n    recordPageEvent(eventType, eventName = null) {\r\n        let newEvent = {\r\n            d: new Date().getTime(),\r\n            et: eventType,\r\n            o: window.location.pathname,\r\n            id: null,\r\n            en: eventName // Event name\r\n        };\r\n        this.events.push(newEvent);\r\n    }\r\n    generatePathTokenFor(element) {\r\n        if (!element) {\r\n            return '';\r\n        }\r\n        let elementTagName = element.tagName.toLowerCase() || '';\r\n        let terminatingTags = ['html', 'body'];\r\n        if (terminatingTags.indexOf(elementTagName) > -1) {\r\n            return '/';\r\n        }\r\n        let parentChildrenNodes = [];\r\n        if (element.parentElement) {\r\n            parentChildrenNodes = Array.prototype.slice.call(element.parentElement.children);\r\n        }\r\n        var tagsUnderParentMatchingCount = parentChildrenNodes.filter(function(item) {\r\n            return item.tagName === element.tagName;\r\n        }).length;\r\n        if (tagsUnderParentMatchingCount === 1) {\r\n            return this.generatePathTokenFor(element.parentElement) + '/' + elementTagName;\r\n        }\r\n        else {\r\n            var matchingElementContext = parentChildrenNodes.filter(function(item) {\r\n                return item.tagName === element.tagName;\r\n            }).map(function(item, index) {\r\n                return { item: item, index: index + 1 };\r\n            }).filter(function(context) {\r\n                return context.item === element;\r\n            })[0];\r\n            if (!matchingElementContext) {\r\n                return '';\r\n            }\r\n            return this.generatePathTokenFor(element.parentElement) + '/' + elementTagName + '[' + matchingElementContext.index + ']';\r\n        }\r\n    }\r\n    getDescriptorFor(element) {\r\n        if (!element) {\r\n            return '';\r\n        }\r\n        let elementTagName = element.tagName.toLowerCase();\r\n        let nameSupportedTags = ['input', 'select', 'textarea'];\r\n        let hrefSupportedTags = ['a'];\r\n        let invalidIdRegex = /[.]*[\\d]{3,}[.]*/;\r\n        if (element.getAttribute('data-clickstream-id')) {\r\n            return '';\r\n        }\r\n        let elementId = element.id;\r\n        if (elementId && !invalidIdRegex.test(elementId)) {\r\n            return elementId;\r\n        }\r\n        if (hrefSupportedTags.indexOf(elementTagName) > -1) {\r\n            let href = element.getAttribute('href');\r\n            if (href) {\r\n                var beforeQueryString = (href.indexOf('?') > -1 ? href.substring(0, href.indexOf('?')) : href);\r\n                return (beforeQueryString.indexOf('https') > -1 ? '/' : '') +\r\n                    beforeQueryString.split('/')\r\n                        .filter(function(item, index) { return beforeQueryString.indexOf('https') > -1 ? index > 2 : index > -1 })\r\n                        .join('/');\r\n            }\r\n        }\r\n        if (nameSupportedTags.indexOf(elementTagName) > -1) {\r\n            let nameAttributeValue = element.getAttribute('name');\r\n            if (nameAttributeValue) {\r\n                return nameAttributeValue;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n    recordMetrics(container, trigger, success, failed) {\r\n        container.clickstream = container.clickstream || {};\r\n        container.clickstream.saved = container.clickstream.saved || {};\r\n        container.clickstream.failed = container.clickstream.failed || {};\r\n        if (success && success.length) {\r\n            container.clickstream.saved[trigger] = container.clickstream.saved[trigger] || [];\r\n            for (var index = 0; index < success.length; index++) {\r\n                container.clickstream.saved[trigger].push(success[index]);\r\n            }\r\n        }\r\n        if (failed && failed.length) {\r\n            container.clickstream.failed[trigger] = container.clickstream.failed[trigger] || [];\r\n            for (var index = 0; index < failed.length; index++) {\r\n                container.clickstream.failed[trigger].push(failed[index]);\r\n            }\r\n        }\r\n    }\r\n    init() {\r\n\t\tvar self = this;\r\n\t\t\r\n        this.recordPageEvent('PageView');\r\n        window.addEventListener('visibilitychange', async function() {\r\n\t\t\tif(document.visibilityState === 'hidden') {\r\n\t\t\t\tlet payloadEvents = self.events;\r\n\t\t\t\tself.events = [];\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait self.publishEventsAsync(payloadEvents);\r\n\t\t\t\t\tself.recordMetrics(window, 'visibilitychanged', payloadEvents, null);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tself.recordMetrics(window, 'visibilitychanged', null, payloadEvents);\r\n\t\t\t\t}\r\n\t\t\t}\r\n        });\r\n        window.addEventListener('hashchange', async function() {\r\n            let payloadEvents = self.events;\r\n            self.events = [];\r\n            self.recordPageEvent('ScreenView');\r\n            try {\r\n                await self.publishEventsAsync(payloadEvents);\r\n                self.recordMetrics(window, 'hashchange', payloadEvents, null);\r\n            }\r\n            catch (e) {\r\n                self.recordMetrics(window, 'hashchange', null, payloadEvents);\r\n            }\r\n        });\r\n        window.addEventListener('beforeunload', async function() {\r\n            let payloadEvents = self.events;\r\n            self.events = [];\r\n            try {\r\n                await self.publishEventsAsync(payloadEvents);\r\n                self.recordMetrics(window, 'unload', payloadEvents, null);\r\n            }\r\n            catch (e) {\r\n                self.recordMetrics(window, 'unload', null, payloadEvents);\r\n            }\r\n        });\r\n\t\t\r\n        self.publishEventsOnTimer();\r\n\t\t\r\n\t\tdocument.addEventListener('click', function(evt) {\r\n\t\t\tvar tagNames = ['a', 'button', 'input', 'select', 'textarea'];\r\n    \r\n\t\t\tif(tagNames.indexOf(evt.target.tagName.toLowerCase()) > -1 || (evt.target.getAttribute('role') || '').toLowerCase() === 'button') {\r\n\t\t\t\tlet tokenPath = self.generatePathTokenFor(evt.target);\r\n\t\t\t\tlet descriptor = self.getDescriptorFor(evt.target);\r\n\t\t\t\tlet eventName = evt.target.getAttribute('data-clickstream-eventname') || '';\r\n\t\t\t\tself.recordClickEvent(tokenPath + '|' + descriptor, eventName);\r\n\t\t\t}\r\n\t\t}, true);\r\n    }\r\n}\r\n\r\nvar csEventRecorder = new ClickstreamEventRecorder();\r\ncsEventRecorder.init();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGlja3N0cmVhbS1mcmFnbWVudC1zY3JpcHQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGlja3N0cmVhbS1mcmFnbWVudC1zY3JpcHQuanM/NTNmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuY2xhc3MgQ2xpY2tzdHJlYW1FdmVudFJlY29yZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gW107XHJcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmludGVydmFsVGltZSA9IDEwMDAgKiA2MCAqIDU7XHJcbiAgICB9XHJcblx0ZGVsYXkobWlsbGlzZWNvbmRzKSB7XHJcblx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJlc29sdmUoKTtcclxuXHRcdFx0fSwgbWlsbGlzZWNvbmRzKTtcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIHByb21pc2U7XHJcblx0fVxyXG4gICAgcHVibGlzaEV2ZW50c09uVGltZXIoKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCFzZWxmLnRpbWVvdXQpIHtcclxuICAgICAgICAgICAgc2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChhc3luYyBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLnRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkRXZlbnRzID0gc2VsZi5ldmVudHM7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmV2ZW50cyA9IFtdO1xyXG5cdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLnB1Ymxpc2hFdmVudHNBc3luYyhwYXlsb2FkRXZlbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY29yZE1ldHJpY3Mod2luZG93LCAndGltZXInLCBwYXlsb2FkRXZlbnRzLCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNvcmRNZXRyaWNzKHdpbmRvdywgJ3RpbWVyJywgbnVsbCwgcGF5bG9hZEV2ZW50cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnB1Ymxpc2hFdmVudHNPblRpbWVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHNlbGYuaW50ZXJ2YWxUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLnRpbWVvdXQpO1xyXG4gICAgICAgICAgICBzZWxmLnB1Ymxpc2hFdmVudHNPblRpbWVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgcHVibGlzaEV2ZW50c0FzeW5jKGV2ZW50cywgcmV0cnlDb3VudGVyKSB7XHRcclxuXHRcdHJldHJ5Q291bnRlciA9IHJldHJ5Q291bnRlciB8fCAxO1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGlmIChyZXRyeUNvdW50ZXIgPiAzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHJldHJ5IGNvdW50IHdhcyBoaXQgZm9yIHRoaXMgcHVibGlzaCBhdHRlbXB0LiBEcm9wcGluZyB0aGUgZXZlbnRzLicpO1xyXG4gICAgICAgIH1cclxuXHRcdFxyXG4gICAgICAgIGlmIChldmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxldCByZWNvcmRFdmVudHMgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB4aHIub3BlbignUE9TVCcsICcvYXBpL2NsaWNrc3RyZWFtL2V2ZW50cycsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuXHRcdFx0XHRcdFx0XHRpZih4aHIuc3RhdHVzID09PSAyMDApIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoeGhyLnJlc3BvbnNlVGV4dCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KHhoci5zdGF0dXMpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoYGV2ZW50cz0ke0pTT04uc3RyaW5naWZ5KGV2ZW50cyl9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHR0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVjb3JkRXZlbnRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmRlbGF5KHJldHJ5Q291bnRlciAqIDIwMCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLnB1Ymxpc2hFdmVudHNBc3luYyhldmVudHMsIHJldHJ5Q291bnRlciArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVjb3JkQ2xpY2tFdmVudChldmVudElkLCBldmVudE5hbWUpIHtcclxuICAgICAgICBsZXQgbmV3RXZlbnQgPSB7XHJcbiAgICAgICAgICAgIGQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBldDogJ0NsaWNrJyxcclxuICAgICAgICAgICAgbzogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxyXG4gICAgICAgICAgICBpZDogZXZlbnRJZCxcclxuICAgICAgICAgICAgZW46IGV2ZW50TmFtZSAvLyBFdmVudCBuYW1lXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmV2ZW50cy5wdXNoKG5ld0V2ZW50KTtcclxuICAgIH1cclxuICAgIHJlY29yZFBhZ2VFdmVudChldmVudFR5cGUsIGV2ZW50TmFtZSA9IG51bGwpIHtcclxuICAgICAgICBsZXQgbmV3RXZlbnQgPSB7XHJcbiAgICAgICAgICAgIGQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBldDogZXZlbnRUeXBlLFxyXG4gICAgICAgICAgICBvOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXHJcbiAgICAgICAgICAgIGlkOiBudWxsLFxyXG4gICAgICAgICAgICBlbjogZXZlbnROYW1lIC8vIEV2ZW50IG5hbWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXZlbnRzLnB1c2gobmV3RXZlbnQpO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVQYXRoVG9rZW5Gb3IoZWxlbWVudCkge1xyXG4gICAgICAgIGlmICghZWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBlbGVtZW50VGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpIHx8ICcnO1xyXG4gICAgICAgIGxldCB0ZXJtaW5hdGluZ1RhZ3MgPSBbJ2h0bWwnLCAnYm9keSddO1xyXG4gICAgICAgIGlmICh0ZXJtaW5hdGluZ1RhZ3MuaW5kZXhPZihlbGVtZW50VGFnTmFtZSkgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJy8nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGFyZW50Q2hpbGRyZW5Ob2RlcyA9IFtdO1xyXG4gICAgICAgIGlmIChlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcGFyZW50Q2hpbGRyZW5Ob2RlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0YWdzVW5kZXJQYXJlbnRNYXRjaGluZ0NvdW50ID0gcGFyZW50Q2hpbGRyZW5Ob2Rlcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS50YWdOYW1lID09PSBlbGVtZW50LnRhZ05hbWU7XHJcbiAgICAgICAgfSkubGVuZ3RoO1xyXG4gICAgICAgIGlmICh0YWdzVW5kZXJQYXJlbnRNYXRjaGluZ0NvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlUGF0aFRva2VuRm9yKGVsZW1lbnQucGFyZW50RWxlbWVudCkgKyAnLycgKyBlbGVtZW50VGFnTmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaGluZ0VsZW1lbnRDb250ZXh0ID0gcGFyZW50Q2hpbGRyZW5Ob2Rlcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udGFnTmFtZSA9PT0gZWxlbWVudC50YWdOYW1lO1xyXG4gICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGl0ZW06IGl0ZW0sIGluZGV4OiBpbmRleCArIDEgfTtcclxuICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0Lml0ZW0gPT09IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH0pWzBdO1xyXG4gICAgICAgICAgICBpZiAoIW1hdGNoaW5nRWxlbWVudENvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVBhdGhUb2tlbkZvcihlbGVtZW50LnBhcmVudEVsZW1lbnQpICsgJy8nICsgZWxlbWVudFRhZ05hbWUgKyAnWycgKyBtYXRjaGluZ0VsZW1lbnRDb250ZXh0LmluZGV4ICsgJ10nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldERlc2NyaXB0b3JGb3IoZWxlbWVudCkge1xyXG4gICAgICAgIGlmICghZWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBlbGVtZW50VGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGxldCBuYW1lU3VwcG9ydGVkVGFncyA9IFsnaW5wdXQnLCAnc2VsZWN0JywgJ3RleHRhcmVhJ107XHJcbiAgICAgICAgbGV0IGhyZWZTdXBwb3J0ZWRUYWdzID0gWydhJ107XHJcbiAgICAgICAgbGV0IGludmFsaWRJZFJlZ2V4ID0gL1suXSpbXFxkXXszLH1bLl0qLztcclxuICAgICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2xpY2tzdHJlYW0taWQnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBlbGVtZW50SWQgPSBlbGVtZW50LmlkO1xyXG4gICAgICAgIGlmIChlbGVtZW50SWQgJiYgIWludmFsaWRJZFJlZ2V4LnRlc3QoZWxlbWVudElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaHJlZlN1cHBvcnRlZFRhZ3MuaW5kZXhPZihlbGVtZW50VGFnTmFtZSkgPiAtMSkge1xyXG4gICAgICAgICAgICBsZXQgaHJlZiA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XHJcbiAgICAgICAgICAgIGlmIChocmVmKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmVmb3JlUXVlcnlTdHJpbmcgPSAoaHJlZi5pbmRleE9mKCc/JykgPiAtMSA/IGhyZWYuc3Vic3RyaW5nKDAsIGhyZWYuaW5kZXhPZignPycpKSA6IGhyZWYpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChiZWZvcmVRdWVyeVN0cmluZy5pbmRleE9mKCdodHRwcycpID4gLTEgPyAnLycgOiAnJykgK1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZVF1ZXJ5U3RyaW5nLnNwbGl0KCcvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihpdGVtLCBpbmRleCkgeyByZXR1cm4gYmVmb3JlUXVlcnlTdHJpbmcuaW5kZXhPZignaHR0cHMnKSA+IC0xID8gaW5kZXggPiAyIDogaW5kZXggPiAtMSB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbignLycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuYW1lU3VwcG9ydGVkVGFncy5pbmRleE9mKGVsZW1lbnRUYWdOYW1lKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGxldCBuYW1lQXR0cmlidXRlVmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xyXG4gICAgICAgICAgICBpZiAobmFtZUF0dHJpYnV0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZUF0dHJpYnV0ZVZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIHJlY29yZE1ldHJpY3MoY29udGFpbmVyLCB0cmlnZ2VyLCBzdWNjZXNzLCBmYWlsZWQpIHtcclxuICAgICAgICBjb250YWluZXIuY2xpY2tzdHJlYW0gPSBjb250YWluZXIuY2xpY2tzdHJlYW0gfHwge307XHJcbiAgICAgICAgY29udGFpbmVyLmNsaWNrc3RyZWFtLnNhdmVkID0gY29udGFpbmVyLmNsaWNrc3RyZWFtLnNhdmVkIHx8IHt9O1xyXG4gICAgICAgIGNvbnRhaW5lci5jbGlja3N0cmVhbS5mYWlsZWQgPSBjb250YWluZXIuY2xpY2tzdHJlYW0uZmFpbGVkIHx8IHt9O1xyXG4gICAgICAgIGlmIChzdWNjZXNzICYmIHN1Y2Nlc3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGlja3N0cmVhbS5zYXZlZFt0cmlnZ2VyXSA9IGNvbnRhaW5lci5jbGlja3N0cmVhbS5zYXZlZFt0cmlnZ2VyXSB8fCBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN1Y2Nlc3MubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuY2xpY2tzdHJlYW0uc2F2ZWRbdHJpZ2dlcl0ucHVzaChzdWNjZXNzW2luZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZhaWxlZCAmJiBmYWlsZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGlja3N0cmVhbS5mYWlsZWRbdHJpZ2dlcl0gPSBjb250YWluZXIuY2xpY2tzdHJlYW0uZmFpbGVkW3RyaWdnZXJdIHx8IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZmFpbGVkLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNsaWNrc3RyZWFtLmZhaWxlZFt0cmlnZ2VyXS5wdXNoKGZhaWxlZFtpbmRleF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG4gICAgICAgIHRoaXMucmVjb3JkUGFnZUV2ZW50KCdQYWdlVmlldycpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgYXN5bmMgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicpIHtcclxuXHRcdFx0XHRsZXQgcGF5bG9hZEV2ZW50cyA9IHNlbGYuZXZlbnRzO1xyXG5cdFx0XHRcdHNlbGYuZXZlbnRzID0gW107XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGF3YWl0IHNlbGYucHVibGlzaEV2ZW50c0FzeW5jKHBheWxvYWRFdmVudHMpO1xyXG5cdFx0XHRcdFx0c2VsZi5yZWNvcmRNZXRyaWNzKHdpbmRvdywgJ3Zpc2liaWxpdHljaGFuZ2VkJywgcGF5bG9hZEV2ZW50cywgbnVsbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0XHRzZWxmLnJlY29yZE1ldHJpY3Mod2luZG93LCAndmlzaWJpbGl0eWNoYW5nZWQnLCBudWxsLCBwYXlsb2FkRXZlbnRzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgcGF5bG9hZEV2ZW50cyA9IHNlbGYuZXZlbnRzO1xyXG4gICAgICAgICAgICBzZWxmLmV2ZW50cyA9IFtdO1xyXG4gICAgICAgICAgICBzZWxmLnJlY29yZFBhZ2VFdmVudCgnU2NyZWVuVmlldycpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5wdWJsaXNoRXZlbnRzQXN5bmMocGF5bG9hZEV2ZW50cyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnJlY29yZE1ldHJpY3Mod2luZG93LCAnaGFzaGNoYW5nZScsIHBheWxvYWRFdmVudHMsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnJlY29yZE1ldHJpY3Mod2luZG93LCAnaGFzaGNoYW5nZScsIG51bGwsIHBheWxvYWRFdmVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgcGF5bG9hZEV2ZW50cyA9IHNlbGYuZXZlbnRzO1xyXG4gICAgICAgICAgICBzZWxmLmV2ZW50cyA9IFtdO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5wdWJsaXNoRXZlbnRzQXN5bmMocGF5bG9hZEV2ZW50cyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnJlY29yZE1ldHJpY3Mod2luZG93LCAndW5sb2FkJywgcGF5bG9hZEV2ZW50cywgbnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYucmVjb3JkTWV0cmljcyh3aW5kb3csICd1bmxvYWQnLCBudWxsLCBwYXlsb2FkRXZlbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cdFx0XHJcbiAgICAgICAgc2VsZi5wdWJsaXNoRXZlbnRzT25UaW1lcigpO1xyXG5cdFx0XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG5cdFx0XHR2YXIgdGFnTmFtZXMgPSBbJ2EnLCAnYnV0dG9uJywgJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYSddO1xyXG4gICAgXHJcblx0XHRcdGlmKHRhZ05hbWVzLmluZGV4T2YoZXZ0LnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEgfHwgKGV2dC50YXJnZXQuZ2V0QXR0cmlidXRlKCdyb2xlJykgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nKSB7XHJcblx0XHRcdFx0bGV0IHRva2VuUGF0aCA9IHNlbGYuZ2VuZXJhdGVQYXRoVG9rZW5Gb3IoZXZ0LnRhcmdldCk7XHJcblx0XHRcdFx0bGV0IGRlc2NyaXB0b3IgPSBzZWxmLmdldERlc2NyaXB0b3JGb3IoZXZ0LnRhcmdldCk7XHJcblx0XHRcdFx0bGV0IGV2ZW50TmFtZSA9IGV2dC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNsaWNrc3RyZWFtLWV2ZW50bmFtZScpIHx8ICcnO1xyXG5cdFx0XHRcdHNlbGYucmVjb3JkQ2xpY2tFdmVudCh0b2tlblBhdGggKyAnfCcgKyBkZXNjcmlwdG9yLCBldmVudE5hbWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB0cnVlKTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIGNzRXZlbnRSZWNvcmRlciA9IG5ldyBDbGlja3N0cmVhbUV2ZW50UmVjb3JkZXIoKTtcclxuY3NFdmVudFJlY29yZGVyLmluaXQoKTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./clickstream-fragment-script.js\n");

/***/ }),

/***/ 0:
/*!**********************************************!*\
  !*** multi ./clickstream-fragment-script.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\build\DS-DSCSCFM-JOB1\src\clickstream-fragment-script.js */"./clickstream-fragment-script.js");


/***/ })

/******/ });